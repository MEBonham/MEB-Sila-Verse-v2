"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function setGlobal(globalStateManager, newGlobalState, callback) {
    if (callback === void 0) { callback = null; }
    if (callback === null) {
        return globalStateManager.set(newGlobalState)
            .then(function () {
            return globalStateManager.state;
        });
    }
    return globalStateManager.set(newGlobalState)
        .then(function (stateChange) {
        return setGlobal(globalStateManager, callback(globalStateManager.state, globalStateManager.dispatchers, stateChange));
    })
        .then(function () {
        return globalStateManager.state;
    });
}
exports.default = setGlobal;
;
